<!DOCTYPE html>
<html lang="pt-br" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

<ui:composition template="/WEB-INF/common/template.xhtml">
	
	<ui:param name="titulo_pagina" value="Cadastro de paciente" />
	<ui:param name="subtitulo_pagina" value="Pequena descrição da funcionalidade" />
	
	<ui:define name="conteudo">
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<h:outputScript library="js" name="jquery.maskedinput.min.js" />
		
	    <script type="text/javascript">
		    $(document).ready(function(){
		        $('[data-toggle="tooltip"]').tooltip();   
		    });
	    </script>
		
		<h:form prependId="false" styleClass="form-horizontal">
			<div class="form-group required">
				<label class="col-sm-2 control-label" for="nome">Nome</label>
				<div class="col-sm-6">
					<h:inputText id="nome" styleClass="form-control validation-required" p:placeholder="Nome do paciente" required="true" value="#{pacienteMB.paciente.nome}" />
				</div>
			</div>
			
			<div class="form-group required">
				<label class="col-sm-2 control-label" for="dataNascimento">Data de nascimento</label>
				<div class="col-sm-2">
					<h:inputText required="true" id="dataNascimento" styleClass="form-control validation-required" p:placeholder="__/__/____" value="#{pacienteMB.paciente.dataDeNascimento}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:inputText>
				</div>
			</div>
			
			<div class="form-group required">
				<label for="email" class="col-sm-2 control-label">Email</label>
				<div class="col-sm-4">
					<h:inputText required="true" id="email" styleClass="form-control validation-required" value="#{pacienteMB.paciente.email}" p:placeholder="Email" />
				</div>
			</div>
			
			<div class="form-group required">
				<label for="telefone" class="col-sm-2 control-label">Telefone:</label>
				<div class="col-sm-2">
					<h:inputText required="true" id="telefone" styleClass="form-control validation-required" p:placeholder="(__) ____-____" value="#{pacienteMB.paciente.telefone}" />
				</div>
			</div>
			
			<div class="form-group">
				<label class="col-sm-2 control-label">Sexo</label>
				<div class="col-sm-2">
					<h:selectOneMenu label="sexo" value="#{pacienteMB.paciente.sexo}">
						<f:selectItem itemLabel="-- Selecione --" />
						<f:selectItems itemLabel="#{sexo.descricao}" itemValue="#{sexo}" value="#{pacienteMB.sexos}" var="sexo" />
					</h:selectOneMenu>
				</div>
			</div>
			
			<div class="form-group">
				<label class="col-sm-2 control-label">Estado Civil</label>
				<div class="col-sm-2">
					<h:selectOneMenu value="#{pacienteMB.paciente.estadoCivil}">
						<f:selectItem itemLabel="-- Selecione --" />
						<f:selectItems itemLabel="#{estadoCivil.descricao}" itemValue="#{estadoCivil}" value="#{pacienteMB.estadosCivis}" var="estadoCivil" />
					</h:selectOneMenu>
				</div>
			</div>
			
			<div class="form-group required">
				<label class="col-sm-2 control-label" for="exampleInputEmail1">Colaborador</label>
				<div class="col-sm-2">
					<h:selectOneMenu label="Colaborador" value="#{pacienteMB.paciente.colaborador}" required="true" styleClass="validation-required">
						<f:converter converterId="br.com.medical.converter.ColaboradorConverter" />
						<f:selectItem itemLabel="-- Selecione --" />
						<f:selectItems itemLabel="#{colaborador.nome}" itemValue="#{colaborador}" value="#{pacienteMB.colaboradores}" var="colaborador" />
					</h:selectOneMenu>
				</div>
			</div>
			
			<div class="form-group required">
				<label class="col-sm-2 control-label" for="cep">CEP</label> 
				<div class="col-sm-2">
					<h:inputText required="true" id="cep" styleClass="form-control validation-required" p:placeholder="_____-__" value="#{pacienteMB.paciente.endereco.cep}" />
				</div>
			</div>
			
			<div class="form-group required">
				<label for="endereco" class="col-sm-2 control-label">Logradouro</label>
				<div class="col-sm-4">
					<h:inputText rendered="true" id="endereco" styleClass="form-control validation-required" value="#{pacienteMB.paciente.endereco.logradouro}" p:placeholder="Rua A" />
				</div>
				
				<label for="bairro" class="col-sm-1 control-label">Bairro</label>
				<div class="col-sm-3">
					<h:inputText rendered="true" id="bairro" styleClass="form-control validation-required" value="#{pacienteMB.paciente.endereco.bairro}" p:placeholder="Bairro central" />
				</div>
			</div>
			
			<div class="form-group">
				<label for="complemento" class="col-sm-2 control-label">Complemento</label>
				<div class="col-sm-4">
					<h:inputText id="complemento" styleClass="form-control" value="#{pacienteMB.paciente.endereco.complemento}" p:placeholder="Qd. 123 L. 2" />
				</div>
			</div>
			
			<div class="form-group required">
				<label for="cidade" class="col-sm-2 control-label">Cidade</label>
				<div class="col-sm-2">
					<h:inputText rendered="true" id="cidade" styleClass="form-control validation-required" value="#{pacienteMB.paciente.endereco.cidade}" p:placeholder="Goiânia" />
				</div>
				
				<label for="estado" class="col-sm-1 control-label">UF</label>
				<div class="col-sm-2">
					<h:inputText rendered="true" id="estado" styleClass="form-control validation-required" value="#{pacienteMB.paciente.endereco.estado}" p:placeholder="Goiás" />
				</div>
			</div>
			
			<div>
				<h:outputLink styleClass="btn btn-danger" value="/sgo/paciente/index.xhtml">Voltar</h:outputLink>
				
				<h:commandButton style="float: right;" styleClass="btn btn-success btn-validation" value="Salvar" action="#{pacienteMB.salvarPaciente}" />
			</div>
		</h:form>
		
		<script>
			$("#dataNascimento").mask("99/99/9999");
			$("#telefone").mask("(99) 9999-9999");
			
			$("#cep").mask("99999-999");
		</script>
		
		<script type="text/javascript">
			$('#cep').keyup(function () {
				var cep = $(this).val().replace('-', '');
				
				if (/^\d+$/.test(cep)) {
					var url = "http://viacep.com.br/ws/" + cep + "/json/"
					$.getJSON(url, function(result){
				        $('#endereco').val(result.logradouro);
				        $('#bairro').val(result.bairro);
				        $('#cidade').val(result.localidade);
				        $('#estado').val(result.uf);
				    });
					clearFieldsEndereco();
				}
			});
			
			function clearFieldsEndereco() {
				$('#endereco').closest('.form-group').removeClass('has-error');
				$('#bairro').closest('.form-group').removeClass('has-error');
				$('#cidade').closest('.form-group').removeClass('has-error');
				$('#estado').closest('.form-group').removeClass('has-error');				
			}
		</script>
		
		<h:outputScript name="validation-input.js" library="js" />
		
	</ui:define>
</ui:composition>
</html>